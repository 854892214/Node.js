{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\src\\components\\NewList\\command.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\src\\components\\NewList\\command.vue","mtime":1561792529881},{"path":"C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\SSS\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.cmt-list{\r\n  width: 100%;\r\n}\r\n.show-time{\r\n  float: right;\r\n}\r\n.cmt-content{\r\n  text-indent: 8px;\r\n}\r\n",{"version":3,"sources":["command.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"command.vue","sourceRoot":"src\\components\\NewList","sourcesContent":["<!-- src/compoents/sub/comment.vue-->\r\n<!-- 子组件不用配置访问路径-->\r\n<template>\r\n  <div class=\"app-comment\">\r\n    <div class=\"mui-card\">\r\n      <div class=\"mui-card-header\"></div>\r\n      <div class=\"mui-card-content\">\r\n        <div class=\"mui-card-content-inner\">\r\n          <textarea placeholder=\"请吐槽最多120个字\" maxlength=\"120\" v-model=\"msg\" style=\"font-size: 15px;\"></textarea>\r\n          <mt-button size=\"large\" type=\"primary\" @click=\"addcomment\">发表评论</mt-button>\r\n        </div>\r\n      </div>\r\n      <div class=\"mui-card-footer\">\r\n        <div class=\"cmt-list\">\r\n          <div class=\"cmt-item\" v-for=\"(item,i) in list\" :key=\"item.id\" v-show=\"list.length!=0\">\r\n            <div>\r\n              <span>第{{i+1}}楼 发表时间:</span>\r\n              <span class=\"show-time\">{{moment(item.ctime).format('YYYY-MM-DD HH:mm:ss')}}</span>\r\n            </div>\r\n            <div class=\"cmt-content\">{{item.content}}</div>\r\n          </div>\r\n          <div v-show=\"list.length==0\">\r\n            <p style=\"text-align:center;\">暂无评论</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n//1:在当前 comment.vue 单独引入提示框组件\r\nimport { Toast } from \"mint-ui\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      pno: 0, //页码 第几页\r\n      pageSize: 5,\r\n      list: [],\r\n      msg: \"\" //双向绑定评论内容\r\n    };\r\n  },\r\n  created() {\r\n    this.getMore();\r\n    //this.addcomment();\r\n  },\r\n  methods: {\r\n    //添加评论\r\n    addcomment() {\r\n      //练习1:\r\n      //*1-为添加评论绑定点击事件\r\n      //console.log(123);\r\n      //*2-获取评论内容   11:49\r\n      var m = this.msg;\r\n      //trim()去除字符串两端空格 \"\"\r\n      //*3-判断评论内容不能为空 \"\"  \"   \"\r\n      //*4-说论为空提示错误信息\r\n      var size = m.trim().length;\r\n      if (size == 0) {\r\n        Toast(\"评论内容不能为空\");\r\n        return;\r\n      }\r\n      //*5-获取当前新闻nid\r\n      var nid = this.$route.query.nid;\r\n      //*6-发送ajax\r\n      //1:创建参数对象  postData  测试\r\n      //stringify 将 js对象转换查询字符串\r\n      var postData = this.qs.stringify({\r\n        nid: nid,\r\n        content: this.msg,\r\n        ctime:this.moment(new Date()).format('YYYY-MM-DD HH:mm:ss')\r\n      });\r\n      //2:发送post 请求         测试\r\n      var url = \"http://127.0.0.1:3000/\";\r\n      url += \"addcomment\";\r\n      this.axios.post(url, postData).then(result => {\r\n        //console.log(result.data);\r\n        //1:提示框 发表成功\r\n        Toast(result.data.msg);\r\n        //2:清空评论区域内容 comment.vue\r\n        this.msg = \"\";\r\n        //2.2:清空页码\r\n        this.pno = 0;\r\n        //2.3:清空原有数组\r\n        this.list = [];\r\n        //3:立即查看评论结果\r\n        this.getMore();\r\n      });\r\n    },\r\n    //评论分页显示\r\n    getMore() {\r\n      this.pno++;\r\n      var url = \"http://127.0.0.1:3000/\";\r\n      url += \"getComment?nid=\" + this.$route.query.nid;\r\n      url += \"&pno=\" + this.pno;\r\n      url += \"&pageSize=\" + this.pageSize;\r\n      this.axios.get(url).then(result => {\r\n        var rows = this.list.concat(result.data.data);\r\n        this.list = rows;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.cmt-list{\r\n  width: 100%;\r\n}\r\n.show-time{\r\n  float: right;\r\n}\r\n.cmt-content{\r\n  text-indent: 8px;\r\n}\r\n</style>\r\n"]}]}